<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap -->
    <link href="/kodkodz/css/bootstrap.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <title>kodkodz by Ferhat Erata</title>
    <meta name="description" content="A fork of Kodkod solver with Z3 Theorem Prover back-end for Relational Logic"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kodkodz/assets/css/style.css">
    <link rel="stylesheet" href="/kodkodz/css/custom.css">
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/kodkodz/js/bootstrap.min.js"></script>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">kodkodz</h1>
      <h2 class="project-tagline">A fork of Kodkod solver with Z3 Theorem Prover back-end for Relational Logic</h2>
      <a href="/kodkodz/" class="btn">Home</a>
      <a href="https://github.com/ModelWriter/kodkodz" class="btn">View on GitHub</a>
      <a href="https://modelwriter.github.io/AlloyInEcore/" class="btn">AlloyInEcore</a>
      <a href="https://itea3.org/project/assume.html" class="btn">ITEA-ASSUME Project</a>
      <a href="https://github.com/ModelWriter/kodkodz/releases" class="btn">Releases</a>
      <!--<a href="https://github.com/ModelWriter/Tarski/tarball/master" class="btn">Download .tar.gz</a>-->
    </section>

    <section class="main-content">
      
<div class="embed-responsive embed-responsive-16by9">
  <iframe class="embed-responsive-item" width="560" height="315" src="https://www.youtube.com/embed/tk9zRwSylIo" frameborder="0" allowfullscreen="">
  </iframe>
</div>

<h2 id="using-smt-solvers-in-finding-models-and-cores-for-relational-logic">Using SMT Solvers in Finding Models and Cores for Relational Logic</h2>
<div class="row">
    <div class="col-sm-12 col-md-12">
      <div class="panel panel-success">
        <div class="panel-heading">Introduction</div>
        <div class="panel-body">
We present a tool for finding finite models and cores of constraints expressed in First-order Relational Logic, namely <a href="http://alloytools.org/">Alloy</a>, using SMT solvers. Alloy has become a popular choice in automated software engineering community, exploited in solving different problems of design analysis, program verification, test-case generation, and declarative configuration. Its underlying engine, <a href="https://github.com/emina/kodkod">KodKod</a>, relies on performing a full reduction of a relational logic formula to an equisatisfiable propositional formula, using novel algorithms and techniques in translation and symmetry breaking. However, this eager encoding of relational logic does not benefit from the advantages of the lazy encoding framework, DPLL(T), that is based on an interplay between a modern CDCL-based SAT solver and a theory solver, which is the main technique used in award-winning Satisfiability Modulo Theories (SMT) Solvers such as <a href="https://github.com/Z3Prover/z3">Z3</a> and <a href="https://github.com/CVC4/CVC4">CVC4</a>. They are particularly good at deciding on combinations of quantifier-free fragments of first-order theories; however, they are increasingly gaining performance in dealing with quantifiers as well. For that reason, our tool provides software engineers a mean to benefit from SMT solvers and their quantifier installation techniques using Relation Logic in the front-end. The tool has been successfully integrated into a platform to facilitate automated reasoning on metamodels and partial models as well as being integrated with Alloy Analyzer itself (<a href="presentation">Go to Presentation</a>).
        </div>
      </div>
    </div>
</div>
	    
<div class="row">
    <div class="col-sm-12 col-md-12">
      <div class="panel panel-warning">
        <div class="panel-heading">Road-Map</div>
        <div class="panel-body">
        <img src="Figures/Comparison.png" class="img-responsive" style="width:100%" alt="..." />
        </div>
      </div>
    </div>
</div>

<h2 id="example-usage">Example Usage</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">kodkod</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">alloyinecore</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">kodkod.ast.Formula</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.ast.Relation</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.ast.Variable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.engine.Solution</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.engine.Solver</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.engine.satlab.SATFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.instance.Bounds</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.instance.TupleFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">kodkod.instance.Universe</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">final</span> <span class="kd">class</span> <span class="nc">TheoryOfList</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">TheoryOfList</span> <span class="n">theoryOfList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TheoryOfList</span><span class="o">();</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">theoryOfList</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Formula</span><span class="o">&gt;</span> <span class="n">formulaList</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Bounds</span> <span class="n">bounds</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Solution</span> <span class="n">solution</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">TheoryOfList</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">formulaList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="n">solveExample</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">// sig Object</span>
    <span class="kd">private</span> <span class="n">Relation</span> <span class="n">Object</span> <span class="o">=</span> <span class="n">Relation</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"Object"</span><span class="o">);</span>
    <span class="c1">// sig List</span>
    <span class="kd">private</span> <span class="n">Relation</span> <span class="n">List</span> <span class="o">=</span> <span class="n">Relation</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"List"</span><span class="o">);</span>
    <span class="c1">// one 'sig Nil' extends List</span>
    <span class="kd">private</span> <span class="n">Relation</span>  <span class="n">Nil</span> <span class="o">=</span> <span class="n">Relation</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"Nil"</span><span class="o">);</span>
    <span class="c1">// 'car': lone Vehicle</span>
    <span class="kd">private</span> <span class="n">Relation</span> <span class="n">car</span> <span class="o">=</span> <span class="n">Relation</span><span class="o">.</span><span class="na">binary</span><span class="o">(</span><span class="s">"car"</span><span class="o">);</span>
    <span class="c1">// 'cdr': lone List</span>
    <span class="kd">private</span> <span class="n">Relation</span> <span class="n">cdr</span> <span class="o">=</span> <span class="n">Relation</span><span class="o">.</span><span class="na">binary</span><span class="o">(</span><span class="s">"cdr"</span><span class="o">);</span>
    <span class="c1">// 'eq': set List</span>
    <span class="kd">private</span> <span class="n">Relation</span> <span class="n">eq</span> <span class="o">=</span> <span class="n">Relation</span><span class="o">.</span><span class="na">binary</span><span class="o">(</span><span class="s">"eq"</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">solveExample</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">defineDeclarations</span><span class="o">();</span>
        <span class="n">defineFormulas</span><span class="o">();</span>
        <span class="n">createBounds</span><span class="o">();</span>

        <span class="n">Solver</span> <span class="n">solver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Solver</span><span class="o">();</span>
        <span class="n">solver</span><span class="o">.</span><span class="na">options</span><span class="o">().</span><span class="na">setSolver</span><span class="o">(</span><span class="n">SATFactory</span><span class="o">.</span><span class="na">Z3Solver</span><span class="o">);</span>

        <span class="n">solution</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="na">solve</span><span class="o">(</span><span class="n">Formula</span><span class="o">.</span><span class="na">and</span><span class="o">(</span><span class="n">formulaList</span><span class="o">),</span> <span class="n">bounds</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">defineDeclarations</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// sig 'Nil extends List'</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Nil</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="n">List</span><span class="o">));</span>

        <span class="c1">// no Object &amp; List</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Object</span><span class="o">.</span><span class="na">intersection</span><span class="o">(</span><span class="n">List</span><span class="o">).</span><span class="na">no</span><span class="o">());</span>

        <span class="c1">// 'one' sig Nil extends List</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Nil</span><span class="o">.</span><span class="na">one</span><span class="o">());</span>

        <span class="c1">// car: lone 'Vehicle'</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">car</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="n">List</span><span class="o">.</span><span class="na">product</span><span class="o">(</span><span class="n">Object</span><span class="o">)));</span>

        <span class="c1">// cdr: lone 'List'</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cdr</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="n">List</span><span class="o">.</span><span class="na">product</span><span class="o">(</span><span class="n">List</span><span class="o">)));</span>

        <span class="c1">// eq: set 'List'</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">eq</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="n">List</span><span class="o">.</span><span class="na">product</span><span class="o">(</span><span class="n">List</span><span class="o">)));</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">defineFormulas</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// car: 'lone' Object</span>
        <span class="n">Variable</span> <span class="n">l</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"l"</span><span class="o">);</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">car</span><span class="o">).</span><span class="na">lone</span><span class="o">().</span><span class="na">forAll</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span><span class="n">List</span><span class="o">)));</span>

        <span class="c1">// cdr: 'lone' List</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"l"</span><span class="o">);</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">cdr</span><span class="o">).</span><span class="na">lone</span><span class="o">().</span><span class="na">forAll</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span><span class="n">List</span><span class="o">)));</span>

        <span class="c1">// car: 'set' List -- By default, no need for a formula.</span>

        <span class="c1">// no Nil.car + Nil.cdr</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Nil</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">car</span><span class="o">).</span><span class="na">union</span><span class="o">(</span><span class="n">Nil</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">cdr</span><span class="o">)).</span><span class="na">no</span><span class="o">());</span>

        <span class="c1">// all l: List - Nil | some l.cdr and some l.car</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"l"</span><span class="o">);</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">cdr</span><span class="o">).</span><span class="na">some</span><span class="o">().</span><span class="na">and</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">car</span><span class="o">).</span><span class="na">some</span><span class="o">())</span>
                <span class="o">.</span><span class="na">forAll</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span><span class="n">List</span><span class="o">.</span><span class="na">difference</span><span class="o">(</span><span class="n">Nil</span><span class="o">))));</span>

        <span class="c1">// all l: List: Nil in l.*cdr</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"l"</span><span class="o">);</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Nil</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">cdr</span><span class="o">.</span><span class="na">reflexiveClosure</span><span class="o">()))</span>
                <span class="o">.</span><span class="na">forAll</span><span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span><span class="n">List</span><span class="o">)));</span>

        <span class="c1">// fact listEquality { all a, b: List | a in b.eq</span>
        <span class="c1">//                      iff (a.car = b.car and a.cdr in b.cdr.eq) }</span>
        <span class="n">Variable</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"a"</span><span class="o">);</span>
        <span class="n">Variable</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Variable</span><span class="o">.</span><span class="na">unary</span><span class="o">(</span><span class="s">"b"</span><span class="o">);</span>
        <span class="n">formulaList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">in</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">eq</span><span class="o">)).</span><span class="na">iff</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">car</span><span class="o">)</span>
                <span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">car</span><span class="o">)).</span><span class="na">and</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">cdr</span><span class="o">).</span><span class="na">in</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">cdr</span><span class="o">).</span><span class="na">join</span><span class="o">(</span><span class="n">eq</span><span class="o">))))</span>
                <span class="o">.</span><span class="na">forAll</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span><span class="n">List</span><span class="o">).</span><span class="na">and</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">oneOf</span><span class="o">(</span><span class="n">List</span><span class="o">))));</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">createBounds</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">List0</span> <span class="o">=</span> <span class="s">"List0"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">List1</span> <span class="o">=</span> <span class="s">"List1"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">List2</span> <span class="o">=</span> <span class="s">"List2"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">List3</span> <span class="o">=</span> <span class="s">"List3"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">List4</span> <span class="o">=</span> <span class="s">"List4"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">List5</span> <span class="o">=</span> <span class="s">"List5"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">Object0</span> <span class="o">=</span> <span class="s">"Object0"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">Object1</span> <span class="o">=</span> <span class="s">"Object1"</span><span class="o">;</span>

        <span class="n">Universe</span> <span class="n">universe</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Universe</span><span class="o">(</span><span class="n">List0</span><span class="o">,</span> <span class="n">List1</span><span class="o">,</span> <span class="n">List2</span><span class="o">,</span> <span class="n">List3</span><span class="o">,</span> <span class="n">List4</span><span class="o">,</span> <span class="n">List5</span><span class="o">,</span> <span class="n">Object0</span><span class="o">,</span> <span class="n">Object1</span><span class="o">);</span>
        <span class="n">TupleFactory</span> <span class="n">tupleFactory</span> <span class="o">=</span> <span class="n">universe</span><span class="o">.</span><span class="na">factory</span><span class="o">();</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bounds</span><span class="o">(</span><span class="n">universe</span><span class="o">);</span>

        <span class="c1">// Bound unary relations</span>
        <span class="n">bounds</span><span class="o">.</span><span class="na">boundExactly</span><span class="o">(</span><span class="n">Object</span><span class="o">,</span> <span class="n">tupleFactory</span><span class="o">.</span><span class="na">setOf</span><span class="o">(</span><span class="n">Object0</span><span class="o">,</span> <span class="n">Object1</span><span class="o">));</span>
        <span class="n">bounds</span><span class="o">.</span><span class="na">boundExactly</span><span class="o">(</span><span class="n">List</span><span class="o">,</span> <span class="n">tupleFactory</span><span class="o">.</span><span class="na">setOf</span><span class="o">(</span><span class="n">List0</span><span class="o">,</span> <span class="n">List1</span><span class="o">,</span> <span class="n">List2</span><span class="o">,</span> <span class="n">List3</span><span class="o">,</span> <span class="n">List4</span><span class="o">,</span> <span class="n">List5</span><span class="o">));</span>
        <span class="n">bounds</span><span class="o">.</span><span class="na">bound</span><span class="o">(</span><span class="n">Nil</span><span class="o">,</span> <span class="n">tupleFactory</span><span class="o">.</span><span class="na">setOf</span><span class="o">(</span><span class="n">List0</span><span class="o">,</span> <span class="n">List1</span><span class="o">,</span> <span class="n">List2</span><span class="o">,</span> <span class="n">List3</span><span class="o">,</span> <span class="n">List4</span><span class="o">,</span> <span class="n">List5</span><span class="o">));</span>

        <span class="c1">// Bound binary relations</span>
        <span class="n">bounds</span><span class="o">.</span><span class="na">bound</span><span class="o">(</span><span class="n">cdr</span><span class="o">,</span> <span class="n">tupleFactory</span><span class="o">.</span><span class="na">setOf</span><span class="o">(</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List1</span><span class="o">,</span> <span class="n">List2</span><span class="o">),</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List2</span><span class="o">,</span> <span class="n">List0</span><span class="o">),</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List4</span><span class="o">,</span> <span class="n">List3</span><span class="o">),</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List3</span><span class="o">,</span> <span class="n">List0</span><span class="o">))</span>
                <span class="o">,</span> <span class="n">bounds</span><span class="o">.</span><span class="na">upperBound</span><span class="o">(</span><span class="n">List</span><span class="o">).</span><span class="na">product</span><span class="o">(</span><span class="n">bounds</span><span class="o">.</span><span class="na">upperBound</span><span class="o">(</span><span class="n">List</span><span class="o">)));</span>

        <span class="n">bounds</span><span class="o">.</span><span class="na">bound</span><span class="o">(</span><span class="n">car</span><span class="o">,</span> <span class="n">tupleFactory</span><span class="o">.</span><span class="na">setOf</span><span class="o">(</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List1</span><span class="o">,</span> <span class="n">Object1</span><span class="o">),</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List2</span><span class="o">,</span> <span class="n">Object0</span><span class="o">),</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List4</span><span class="o">,</span> <span class="n">Object1</span><span class="o">),</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List0</span><span class="o">,</span> <span class="n">Object1</span><span class="o">),</span>
                <span class="n">tupleFactory</span><span class="o">.</span><span class="na">tuple</span><span class="o">(</span><span class="n">List3</span><span class="o">,</span> <span class="n">Object0</span><span class="o">))</span>
                <span class="o">,</span> <span class="n">bounds</span><span class="o">.</span><span class="na">upperBound</span><span class="o">(</span><span class="n">List</span><span class="o">).</span><span class="na">product</span><span class="o">(</span><span class="n">bounds</span><span class="o">.</span><span class="na">upperBound</span><span class="o">(</span><span class="n">Object</span><span class="o">)));</span>

        <span class="n">bounds</span><span class="o">.</span><span class="na">bound</span><span class="o">(</span><span class="n">eq</span><span class="o">,</span> <span class="n">bounds</span><span class="o">.</span><span class="na">upperBound</span><span class="o">(</span><span class="n">List</span><span class="o">).</span><span class="na">product</span><span class="o">(</span><span class="n">bounds</span><span class="o">.</span><span class="na">upperBound</span><span class="o">(</span><span class="n">List</span><span class="o">)));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">solution</span><span class="o">.</span><span class="na">toString</span><span class="o">();}</span>
<span class="o">}</span>
</code></pre></div></div>
<h2 id="translation">Translation</h2>

<div class="language-haskell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="kt">Nil</span> <span class="kr">in</span> <span class="kt">List</span><span class="p">)</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">))</span> <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="kt">List</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">21</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">all</span> <span class="n">l</span><span class="o">:</span> <span class="n">one</span> <span class="kt">List</span> <span class="o">|</span> <span class="n">lone</span> <span class="p">(</span><span class="n">l</span> <span class="o">.</span> <span class="n">car</span><span class="p">))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">l</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">y</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">)</span> <span class="p">(</span><span class="n">z</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
                  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">car</span> <span class="n">l</span> <span class="n">y</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">car</span> <span class="n">l</span> <span class="n">z</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="o">=</span> <span class="n">y</span><span class="o">!</span><span class="mi">1</span> <span class="n">z</span><span class="o">!</span><span class="mi">1</span><span class="p">)))</span>
                     <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">19</span><span class="p">))))</span>
       <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">l</span><span class="p">))</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>
     <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">20</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">all</span> <span class="n">l</span><span class="o">:</span> <span class="n">one</span> <span class="kt">List</span> <span class="o">|</span> <span class="n">lone</span> <span class="p">(</span><span class="n">l</span> <span class="o">.</span> <span class="n">cdr</span><span class="p">))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">l</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">y</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">)</span> <span class="p">(</span><span class="n">z</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
                  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">l</span> <span class="n">y</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">l</span> <span class="n">z</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="o">=</span> <span class="n">y</span><span class="o">!</span><span class="mi">1</span> <span class="n">z</span><span class="o">!</span><span class="mi">1</span><span class="p">)))</span>
                     <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">0</span><span class="p">))))</span>
       <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">l</span><span class="p">))</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">car</span> <span class="kr">in</span> <span class="p">(</span><span class="kt">List</span> <span class="o">-&gt;</span> <span class="kt">Object</span><span class="p">))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">)</span> <span class="p">(</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">car</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="kt">Object</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">18</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="n">one</span> <span class="kt">Nil</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">y</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">)</span> <span class="p">(</span><span class="n">z</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">))</span>
             <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">y</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">z</span><span class="o">!</span><span class="mi">0</span><span class="p">))</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="o">=</span> <span class="n">y</span><span class="o">!</span><span class="mi">0</span> <span class="n">z</span><span class="o">!</span><span class="mi">0</span><span class="p">)))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">25</span><span class="p">))))</span>
  <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">y</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">))</span> <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">y</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span> <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">11</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">26</span><span class="p">))</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="n">no</span> <span class="p">((</span><span class="kt">Nil</span> <span class="o">.</span> <span class="n">car</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="kt">Nil</span> <span class="o">.</span> <span class="n">cdr</span><span class="p">))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">))</span>
             <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">or</span> <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
                      <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">car</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">))</span> <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">8</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">22</span><span class="p">))</span>
                    <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
                      <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">))</span> <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">9</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">23</span><span class="p">)))</span>
                <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">10</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">24</span><span class="p">))))</span>
  <span class="p">(</span><span class="n">not</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">cdr</span> <span class="kr">in</span> <span class="p">(</span><span class="kt">List</span> <span class="o">-&gt;</span> <span class="kt">List</span><span class="p">))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">)</span> <span class="p">(</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="kt">List</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">12</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">all</span> <span class="n">l</span><span class="o">:</span> <span class="n">one</span> <span class="p">(</span><span class="kt">List</span> <span class="o">-</span> <span class="kt">Nil</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">some</span> <span class="p">(</span><span class="n">l</span> <span class="o">.</span> <span class="n">cdr</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">some</span> <span class="p">(</span><span class="n">l</span> <span class="o">.</span> <span class="n">car</span><span class="p">)))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">l</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">l</span><span class="p">)</span> <span class="p">(</span><span class="n">not</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">l</span><span class="p">)))</span>
         <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span> <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">l</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">4</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">8</span><span class="p">))</span>
              <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span> <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">car</span> <span class="n">l</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">5</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">9</span><span class="p">))))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">10</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">all</span> <span class="p">[</span><span class="n">a</span><span class="o">:</span> <span class="n">one</span> <span class="kt">List</span><span class="p">,</span> <span class="n">b</span><span class="o">:</span> <span class="n">one</span> <span class="kt">List</span><span class="p">]</span> <span class="o">|</span> <span class="p">((</span><span class="n">a</span> <span class="kr">in</span> <span class="p">(</span><span class="n">b</span> <span class="o">.</span> <span class="n">eq</span><span class="p">))</span> <span class="o">&lt;=&gt;</span> 
                        <span class="p">(((</span><span class="n">a</span> <span class="o">.</span> <span class="n">car</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span> <span class="o">.</span> <span class="n">car</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="n">a</span> <span class="o">.</span> <span class="n">cdr</span><span class="p">)</span> <span class="kr">in</span> <span class="p">((</span><span class="n">b</span> <span class="o">.</span> <span class="n">cdr</span><span class="p">)</span> <span class="o">.</span> <span class="n">eq</span><span class="p">)))))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">a</span> <span class="n">univ</span><span class="p">)</span> <span class="p">(</span><span class="n">b</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">2</span> <span class="n">univ</span><span class="p">))</span>
                  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">a</span> <span class="n">x</span><span class="o">!</span><span class="mi">2</span><span class="p">)</span>
                         <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">3</span> <span class="n">univ</span><span class="p">))</span>
                           <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">b</span> <span class="n">x</span><span class="o">!</span><span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">eq</span> <span class="n">x</span><span class="o">!</span><span class="mi">3</span> <span class="n">x</span><span class="o">!</span><span class="mi">2</span><span class="p">))</span>
                              <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">7</span>
                              <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">15</span><span class="p">)))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">16</span><span class="p">))))</span>
     <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">2</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">2</span> <span class="n">univ</span><span class="p">))</span>
                       <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=</span> <span class="p">(</span><span class="n">car</span> <span class="n">a</span> <span class="n">x</span><span class="o">!</span><span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="n">car</span> <span class="n">b</span> <span class="n">x</span><span class="o">!</span><span class="mi">2</span><span class="p">))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">14</span><span class="p">))</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">)))</span>
       <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">a</span><span class="p">)</span> <span class="p">(</span><span class="kt">List</span> <span class="n">b</span><span class="p">))</span> <span class="p">(</span><span class="o">=</span> <span class="p">(</span><span class="n">eq</span> <span class="n">b</span> <span class="n">a</span><span class="p">)</span> <span class="n">a</span><span class="o">!</span><span class="mi">2</span><span class="p">))))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">17</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">all</span> <span class="n">l</span><span class="o">:</span> <span class="n">one</span> <span class="kt">List</span> <span class="o">|</span> <span class="p">(</span><span class="kt">Nil</span> <span class="kr">in</span> <span class="p">(</span><span class="n">l</span> <span class="o">.</span> <span class="o">*</span><span class="n">cdr</span><span class="p">)))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">l</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">l</span><span class="p">))</span>
         <span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
           <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">or</span> <span class="p">(</span><span class="o">=</span> <span class="n">l</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span>
                     <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">3</span> <span class="n">univ</span><span class="p">))</span>
                       <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">or</span> <span class="p">(</span><span class="o">=</span> <span class="n">x</span><span class="o">!</span><span class="mi">3</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span>
                                 <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">4</span> <span class="n">univ</span><span class="p">))</span>
                                   <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">or</span> <span class="p">(</span><span class="o">=</span> <span class="n">x</span><span class="o">!</span><span class="mi">4</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span>
                                             <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">5</span> <span class="n">univ</span><span class="p">))</span>
                                               <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="kr">let</span> <span class="p">((</span><span class="n">a</span><span class="o">!</span><span class="mi">1</span> <span class="p">(</span><span class="n">or</span> <span class="p">(</span><span class="o">=</span> <span class="n">x</span><span class="o">!</span><span class="mi">5</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span>
                                                                 <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">6</span> <span class="n">univ</span><span class="p">))</span>
                                                                   <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">x</span><span class="o">!</span><span class="mi">5</span> <span class="n">x</span><span class="o">!</span><span class="mi">6</span><span class="p">)</span>
                                                                           <span class="p">(</span><span class="o">=</span> <span class="n">x</span><span class="o">!</span><span class="mi">6</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>
                                                                      <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">0</span>
                                                                      <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">2</span><span class="p">)))))</span>
                                                    <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">x</span><span class="o">!</span><span class="mi">4</span> <span class="n">x</span><span class="o">!</span><span class="mi">5</span><span class="p">)</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>
                                                  <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">1</span>
                                                  <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">3</span><span class="p">)))))</span>
                                        <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">x</span><span class="o">!</span><span class="mi">3</span> <span class="n">x</span><span class="o">!</span><span class="mi">4</span><span class="p">)</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>
                                      <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">2</span>
                                      <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">4</span><span class="p">)))))</span>
                            <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="n">cdr</span> <span class="n">l</span> <span class="n">x</span><span class="o">!</span><span class="mi">3</span><span class="p">)</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>
                          <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">3</span>
                          <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">5</span><span class="p">)))))</span>
                <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="kt">Nil</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="n">a</span><span class="o">!</span><span class="mi">1</span><span class="p">))</span>
              <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">6</span><span class="p">)))</span>
     <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">7</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="p">(</span><span class="n">eq</span> <span class="kr">in</span> <span class="p">(</span><span class="kt">List</span> <span class="o">-&gt;</span> <span class="kt">List</span><span class="p">))</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">forall</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">)</span> <span class="p">(</span><span class="n">x</span><span class="o">!</span><span class="mi">1</span> <span class="n">univ</span><span class="p">))</span>
  <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="o">=&gt;</span> <span class="p">(</span><span class="n">eq</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">List</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="kt">List</span> <span class="n">x</span><span class="o">!</span><span class="mi">1</span><span class="p">)))</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">13</span><span class="p">))</span>

<span class="n">kodkod</span><span class="o">:</span> <span class="n">no</span> <span class="p">(</span><span class="kt">Object</span> <span class="o">&amp;</span> <span class="kt">List</span><span class="p">)</span>
<span class="n">z3</span><span class="o">:</span>
<span class="p">(</span><span class="n">not</span> <span class="p">(</span><span class="n">exists</span> <span class="p">((</span><span class="n">x</span><span class="o">!</span><span class="mi">0</span> <span class="n">univ</span><span class="p">))</span>
       <span class="p">(</span><span class="o">!</span> <span class="p">(</span><span class="n">and</span> <span class="p">(</span><span class="kt">Object</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="kt">List</span> <span class="n">x</span><span class="o">!</span><span class="mi">0</span><span class="p">))</span> <span class="o">:</span><span class="n">skolemid</span> <span class="n">s</span><span class="o">!</span><span class="mi">6</span> <span class="o">:</span><span class="n">qid</span> <span class="n">q</span><span class="o">!</span><span class="mi">11</span><span class="p">)))</span>
</code></pre></div></div>

<h2 id="outcome">Outcome</h2>
<pre><code class="language-vi">---INSTANCE---
relations: {
List=[[List0], [List1], [List2], [List3], [List4], [List5]], 
eq=[[List0, List0], [List1, List1], [List1, List4], [List2, List2], [List2, List3], [List3, List2], [List3, List3], [List4, List1], [List4, List4], [List5, List5]],
car=[[List0, Object1], [List1, Object1], [List2, Object0], [List3, Object0], [List4, Object1]], 
cdr=[[List0, List5], [List1, List2], [List2, List0], [List3, List0], [List4, List3]],
Nil=[[List5]], 
Object=[[Object0], [Object1]]}
ints: []
---OUTCOME---
SATISFIABLE

---INSTANCE---
relations: {List=[[List0], [List1], [List2], [List3], [List4], [List5]], eq=[[List0, List0], [List1, List1], [List1, List4], [List2, List2], [List2, List3], [List3, List2], [List3, List3], [List4, List1], [List4, List4], [List5, List5]], car=[[List0, Object1], [List1, Object1], [List2, Object0], [List3, Object0], [List4, Object1]], cdr=[[List0, List5], [List1, List2], [List2, List0], [List3, List0], [List4, List3]], Nil=[[List5]], Object=[[Object0], [Object1]]}
ints: []

---STATS---
p cnf 0 0
primary variables: 0
translation time: 990 ms
solving time: 7137 ms
</code></pre>

<div class="bs-callout bs-callout-success" id="thanks">
  <a href="acknowledgements#main"><h4>Acknowledgements</h4></a>
  <div class="row">
	  <div class="col-xs-6 col-md-4">
		<a href="https://itea3.org/project/modelwriter.html" class="thumbnail"> <img src="Figures/ITEA3.jpg" alt="..." /> </a>
	  </div>
	  <div class="col-xs-6 col-md-4">
		<a href="http://www.eurekanetwork.org/" class="thumbnail"> <img src="Figures/EUREKA.png" alt="..." /> </a>
	  </div>
	  <div class="col-xs-6 col-md-4">
		<a href="http://www.cost.eu/COST_Actions/ict/IC1404" class="thumbnail"> <img src="Figures/COST.jpg" alt="..." /> </a>
	  </div>
  </div>
</div>



      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ModelWriter/kodkodz">kodkodz</a> is maintained by <a href="https://itea3.org/project/modelwriter.html">ModelWriter Project. <a class="navbar-brand" href="https://itea3.org/project/modelwriter.html"><img alt="Brand" src="/kodkodz/Figures/mw.png">
		  </a></a></span>
        <!--<span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>-->
      </footer>
    </section>

    
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-101255280-2', 'auto');
        ga('send', 'pageview');
      </script>
    
   
  </body>
</html>
